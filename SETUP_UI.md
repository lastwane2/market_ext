# UI Setup Instructions

## Quick Start

### 1. Install UI Dependencies

```bash
cd ui
npm install
```

### 2. Build the UI

```bash
npm run build
```

This compiles the React app and outputs to `extension/ui/` directory.

**Important**: You must rebuild after making any changes to the UI code.

### 3. Start the Server (unchanged)

In a separate terminal:

```bash
cd server
npm start
```

The server should run on `http://localhost:8787`.

### 4. Load Extension in Chrome

1. Open Chrome and navigate to `chrome://extensions/`
2. Enable "Developer mode" (toggle in top-right)
3. Click "Load unpacked"
4. Select the `extension` folder (`C:\Users\lastwane\Desktop\projects\ext\extension`)
5. The extension should appear in your list

### 5. View Mock History

1. Click the extension icon in Chrome toolbar
2. Click the "History" tab
3. You should see 3 mock audit entries:
   - stripe.com/pricing (Good status)
   - webflow.com (Good status)
   - example.com/landing (Poor status, was improved)

### 6. Run a Real Audit

1. Navigate to any website (e.g., https://stripe.com)
2. Click the extension icon
3. Click "Run Audit" button
4. Wait for analysis (shows loading skeleton)
5. Results appear in styled cards
6. Click "Copy Report" to copy formatted text
7. The audit is automatically saved to history

## Development Workflow

### Making UI Changes

1. Edit files in `ui/src/`
2. Run `npm run build` in the `ui/` directory
3. Reload the extension in Chrome (`chrome://extensions/` → click reload icon)
4. Test your changes

### Development Mode (with hot reload)

```bash
cd ui
npm run dev
```

Note: Chrome extensions require built files, so you'll still need to build for production.

## Features

### Audit Tab
- Run new audits
- View results in styled cards
- Copy formatted report
- Open source page in new tab
- See improvement notice if audit was enhanced

### History Tab
- View all previous audits
- See status badges (Good/Needs work/Poor)
- Click any audit to see full details
- Clear history button
- Mock data seeded on first load

### State Persistence
- Last audit is saved and restored
- History persists across popup closes
- Last viewed audit is remembered

## Troubleshooting

### UI not loading
- Make sure you ran `npm run build` in the `ui/` directory
- Check that `extension/ui/index.html` exists
- Reload the extension in Chrome

### No mock history
- Open the extension popup once to trigger seedMockData()
- Check Chrome DevTools console for errors

### Server connection errors
- Ensure server is running on `http://localhost:8787`
- Check `server/.env` has valid `OPENAI_API_KEY`
- Verify CORS is enabled (already in code)

### Build errors
- Make sure you're in the `ui/` directory when running npm commands
- Delete `node_modules` and run `npm install` again
- Check Node.js version (should be 18+)

## File Structure

```
ext/
├── extension/
│   ├── ui/              # Built UI files (generated by npm run build)
│   ├── background.js
│   ├── content.js
│   └── manifest.json
├── ui/                  # React source code
│   ├── src/
│   │   ├── components/
│   │   ├── lib/
│   │   ├── App.jsx
│   │   └── main.jsx
│   ├── package.json
│   └── vite.config.js
└── server/
    └── ...
```

